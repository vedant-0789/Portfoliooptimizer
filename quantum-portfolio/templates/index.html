<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALGORHYTHM | Quantum Portfolio</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        primary: '#0ea5e9', // Sky 500
                        secondary: '#1E293B',
                        accent: '#10B981',
                        success: '#22c55e',
                        danger: '#ef4444'
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --primary: #0ea5e9;
            --secondary: #0f172a;
            --accent: #10b981;
            --quantum: #8b5cf6;
        }

        body {
            background: radial-gradient(circle at top right, #1e293b, #0f172a);
            color: #f8fafc;
            min-height: 100vh;
        }

        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .animate-fade-in {
            animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .quantum-matrix {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            opacity: 0.15;
            background: linear-gradient(rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.9)),
                url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
        }

        .glow-button {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .glow-button:hover {
            box-shadow: 0 0 20px rgba(14, 165, 233, 0.6);
            transform: scale(1.02);
        }

        .glow-button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            transform: rotate(45deg);
            transition: all 0.5s ease;
        }

        .glow-button:hover::after {
            left: 100%;
            top: 100%;
        }

        #voice-btn.recording {
            background-color: #ef4444;
            animation: pulse-red 1.5s infinite;
        }

        @keyframes pulse-red {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
            }

            70% {
                transform: scale(1.1);
                box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            }

            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
            }
        }

        .animate-marquee {
            display: inline-block;
            animation: marquee 30s linear infinite;
        }

        @keyframes marquee {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        .animate-marquee:hover {
            animation-play-state: paused;
        }
    </style>
</head>

<body class="bg-gray-900 text-slate-200 font-sans">
    <div class="quantum-matrix"></div>

    <!-- Navbar -->
    <nav class="border-b border-white/10 sticky top-0 z-50 glass">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="bg-primary/20 p-2 rounded-lg mr-3">
                        <svg class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                        </svg>
                    </div>
                    <span class="text-xl font-bold tracking-tight text-white">ALGORHYTHM <span
                            class="text-xs font-light text-primary tracking-widest ml-1 opacity-70 uppercase">v2.1</span></span>
                </div>
                <div class="flex items-center space-x-6">
                    <!-- Project Manifesto Toggle -->
                    <button onclick="toggleManifesto()"
                        class="text-xs font-bold text-gray-400 hover:text-primary transition uppercase tracking-widest">Manifesto</button>

                    <!-- Voice Control Button -->
                    <button id="voice-btn" onclick="toggleVoiceSearch()"
                        class="p-2 rounded-full bg-white/5 hover:bg-white/10 transition-all group relative">
                        <svg class="h-5 w-5 text-gray-400 group-hover:text-primary" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                        </svg>
                        <span
                            class="absolute -bottom-10 left-1/2 -translate-x-1/2 bg-black text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition whitespace-nowrap">Voice
                            Insight</span>
                    </button>

                    <span id="market-badge"
                        class="px-3 py-1 rounded-full bg-green-500/10 text-green-400 text-xs font-bold flex items-center border border-green-500/20">
                        <span class="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"></span> LIVE MARKET
                    </span>
                    <a href="/" class="text-sm font-medium text-primary">Dashboard</a>
                    <a href="/analysis"
                        class="text-sm font-medium text-gray-400 hover:text-white transition">Analysis</a>
                    <button onclick="handleLogout()"
                        class="text-xs font-bold text-red-500 hover:text-red-400 uppercase transition tracking-widest">Logout</button>
                    <button id="wallet-btn" onclick="connectWallet()"
                        class="bg-primary text-white px-5 py-2 rounded-lg text-sm font-bold glow-button">Connect
                        Portfolio</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Global Disclaimer Overlay -->
    <div id="global-disclaimer"
        class="fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-black/95 backdrop-blur-2xl transition-opacity duration-500">
        <div class="glass max-w-lg w-full p-10 rounded-3xl border border-white/10 text-center relative overflow-hidden">
            <div class="absolute inset-0 bg-primary/5 -z-10"></div>
            <div
                class="h-16 w-16 bg-red-500/10 rounded-2xl flex items-center justify-center border border-red-500/30 mx-auto mb-6">
                <svg class="h-10 w-10 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
            </div>
            <h2 class="text-3xl font-black text-white mb-4 uppercase tracking-tight">Financial Disclaimer</h2>
            <div class="text-gray-400 text-xs font-medium space-y-4 mb-8 leading-relaxed text-left">
                <p>1. <strong>Risk Warning:</strong> Algorithmic trading and AI-driven portfolio management carry
                    significant financial risk. Past performance is not an indicator of future success.</p>
                <p>2. <strong>No Advice:</strong> This software is for educational and experimental purposes. It does
                    not constitute certified financial advice. Always consult a human financial professional.</p>
                <p>3. <strong>Data Disclaimer:</strong> Prices and news sentiment are provided for demonstration.
                    Latency and anomalies may occur in live feeds.</p>
            </div>

            <div
                class="flex items-center justify-center space-x-3 mb-6 p-3 bg-red-500/5 rounded-xl border border-red-500/10">
                <input type="checkbox" id="disclaimer-checkbox"
                    class="h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary accent-primary">
                <label for="disclaimer-checkbox"
                    class="text-[10px] text-gray-400 font-bold uppercase tracking-tight cursor-pointer">I acknowledge
                    the risks and agree to use this AI responsibly</label>
            </div>

            <button onclick="acceptDisclaimer()"
                class="w-full bg-primary py-4 rounded-xl font-black text-white shadow-xl shadow-primary/20 transition hover:bg-blue-600 uppercase text-xs tracking-widest active:scale-95">I
                Understand & Accept Risks</button>
        </div>
    </div>

    <!-- Prediction Review Modal -->
    <div id="prediction-modal"
        class="fixed inset-0 z-[1100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md hidden opacity-0 transition-opacity duration-300">
        <div class="glass max-w-md w-full p-8 rounded-3xl border border-white/10 relative overflow-hidden">
            <div class="absolute top-0 right-0 p-4">
                <button onclick="closePredictionModal()" class="text-gray-500 hover:text-white transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>
            <div id="prediction-content">
                <div class="flex items-center mb-6">
                    <div
                        class="h-10 w-10 bg-primary/20 rounded-xl flex items-center justify-center border border-primary/30 mr-4">
                        <span id="pred-symbol" class="text-primary font-black text-xs uppercase">SYM</span>
                    </div>
                    <div>
                        <h3 class="text-xl font-black text-white uppercase tracking-tight" id="pred-title">Stock
                            Analysis</h3>
                        <div class="flex items-center space-x-2 mt-1">
                            <p id="pred-status" class="text-[10px] text-green-400 font-bold uppercase tracking-widest">
                                Bullish Signal</p>
                            <span class="text-white/20">|</span>
                            <span id="pred-badge"
                                class="text-primary font-black text-[9px] uppercase tracking-tighter bg-primary/10 px-2 py-0.5 rounded border border-primary/20">Institutional
                                Grade</span>
                        </div>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10">
                        <div>
                            <h4 class="text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1">AI Confidence
                            </h4>
                            <p class="text-xl font-black text-white" id="pred-confidence">94.2%</p>
                        </div>
                        <div
                            class="h-10 w-10 bg-primary/20 rounded-xl flex items-center justify-center border border-primary/30">
                            <svg class="w-5 h-5 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                            </svg>
                        </div>
                    </div>
                    <div>
                        <h4 class="text-[9px] font-black text-gray-500 uppercase tracking-widest mb-2">AI Sentinel
                            Review</h4>
                        <p id="pred-review" class="text-xs text-gray-300 leading-relaxed"></p>
                    </div>
                    <div class="p-4 bg-primary/10 border border-primary/20 rounded-2xl">
                        <h4 class="text-[9px] font-black text-primary uppercase tracking-widest mb-2">Why this over
                            others?</h4>
                        <p id="pred-why" class="text-xs text-blue-100/80 leading-relaxed italic"></p>
                    </div>
                </div>

                <div class="mt-8 pt-6 border-t border-white/5">
                    <p class="text-[10px] text-gray-600 italic">*All predictions involve capital risk. AI reviews are
                        updated every 4 hours.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Manifesto Modal -->
    <div id="manifesto-modal"
        class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md hidden opacity-0 transition-opacity duration-300">
        <div
            class="glass max-w-2xl w-full p-8 rounded-3xl border border-white/10 max-h-[90vh] overflow-y-auto no-scrollbar relative">
            <button onclick="toggleManifesto()"
                class="absolute top-6 right-6 text-gray-400 hover:text-white transition">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                    </path>
                </svg>
            </button>
            <h2 class="text-3xl font-black text-white mb-6 uppercase tracking-tight">Project Manifesto</h2>

            <div class="space-y-6 text-gray-300 text-sm leading-relaxed">
                <section class="p-4 bg-primary/10 rounded-xl border border-primary/20">
                    <h3 class="text-primary font-bold mb-2 tracking-widest uppercase text-xs">Overview</h3>
                    <p>ALGORHYTHM is a smart web dashboard that helps everyday investors grow money safely by
                        automatically picking the best mix of stocks, bonds, crypto, and funds. It uses advanced AI to
                        constantly tweak investments based on live news and social buzz, while protecting everything
                        with super-secure tech that even future supercomputers can't hack.</p>
                </section>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="p-4 bg-white/5 rounded-xl border border-white/10">
                        <h4 class="text-white font-bold mb-2 flex items-center"><span class="mr-2">ðŸš¨</span> The Problem
                        </h4>
                        <p class="text-xs opacity-80 leading-normal">Normal investment apps ignore real-time social
                            chatter (like "Tesla stock crashing") and use encryption that can be broken by quantum
                            computers in 5-10 years, risking your entire portfolio.</p>
                    </div>
                    <div class="p-4 bg-white/5 rounded-xl border border-white/10">
                        <h4 class="text-white font-bold mb-2 flex items-center"><span class="mr-2">ðŸ’¡</span> The Fix
                        </h4>
                        <p class="text-xs opacity-80 leading-normal">ALGORHYTHM beats the market by 15%+ through smart
                            AI predictions and stays hack-proof forever using Post-Quantum Cryptography.</p>
                    </div>
                </div>

                <section>
                    <h3 class="text-white font-bold mb-3 tracking-widest uppercase text-xs">How It Works</h3>
                    <ul class="space-y-3">
                        <li class="flex items-start"><span class="text-primary mr-3 mt-1">1.</span>
                            <div><strong>Input Basics:</strong> Define money, risk level, and goals.</div>
                        </li>
                        <li class="flex items-start"><span class="text-primary mr-3 mt-1">2.</span>
                            <div><strong>AI Analysis:</strong> Scans stock news and social sentiment (Twitter/Reddit)
                                using Reinforcement Learning.</div>
                        </li>
                        <li class="flex items-start"><span class="text-primary mr-3 mt-1">3.</span>
                            <div><strong>Quantum Shield:</strong> Uses NIST-standard Post-Quantum Cryptography and
                                Blockchain ledger.</div>
                        </li>
                    </ul>
                </section>

                <section class="p-4 bg-green-500/10 rounded-xl border border-green-500/20">
                    <h3 class="text-green-400 font-bold mb-2 tracking-widest uppercase text-xs italic">Example in Action
                    </h3>
                    <p class="text-xs opacity-90">Start with â‚¹1L. AI spots hype on Green Energy â†’ Rebalances 30% into
                        solar stocks. Result: +12% return vs market +2%, all logged on the blockchain for permanent
                        verification.</p>
                </section>
            </div>

            <button onclick="closeAndSetup()"
                class="w-full mt-8 bg-primary py-3 rounded-xl font-bold text-white shadow-lg shadow-primary/20 transition hover:bg-blue-600 uppercase text-xs tracking-widest">Got
                it, Let's Optimize</button>
        </div>
    </div>

    <!-- Onboarding Modal (Connect Portfolio) -->
    <div id="onboarding-modal"
        class="fixed inset-0 z-[110] flex items-center justify-center p-4 bg-black/90 backdrop-blur-xl hidden opacity-0 transition-opacity duration-300">
        <div class="glass max-w-md w-full p-8 rounded-3xl border border-white/10 relative">
            <button onclick="toggleOnboarding()"
                class="absolute top-6 right-6 text-gray-400 hover:text-white transition">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                    </path>
                </svg>
            </button>
            <h2 class="text-2xl font-black text-white mb-2 uppercase tracking-tight">Configure Portfolio</h2>
            <p class="text-gray-500 text-xs mb-8 uppercase tracking-widest">Setting up your AI Sentinel profile</p>

            <form id="portfolio-form" class="space-y-6">
                <div>
                    <label class="block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2">Initial
                        Capital (INR)</label>
                    <input type="number" id="input-amount" placeholder="e.g. 100000"
                        class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-primary transition"
                        required>
                </div>
                <div>
                    <label class="block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2">Risk
                        Vector Alignment</label>
                    <select id="input-risk"
                        class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-primary transition">
                        <option value="Low">Defensive (Low Risk)</option>
                        <option value="Medium" selected>Aggressive (Medium Risk)</option>
                        <option value="High">Quantum-Growth (High Risk)</option>
                    </select>
                </div>
                <div>
                    <label class="block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2">Temporal
                        Goal</label>
                    <input type="text" id="input-goal" placeholder="e.g. Retirement in 5 Years"
                        class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-primary transition">
                </div>

                <button type="submit"
                    class="w-full bg-primary py-4 rounded-xl font-black text-white shadow-xl shadow-primary/20 transition hover:bg-blue-600 uppercase text-xs tracking-widest">Synchronize
                    Nodes</button>
            </form>
        </div>
    </div>

    <!-- Top Intelligence Bar: News & Market -->
    <div class="bg-black/60 border-b border-white/5 backdrop-blur-md sticky top-16 z-40">
        <!-- News Ticker -->
        <div class="border-b border-white/5 py-1.5 overflow-hidden group flex items-center">
            <div class="px-4 py-0.5 bg-primary/10 border-r border-white/10 flex items-center space-x-2 z-10 shrink-0">
                <span class="text-[8px] font-black text-white uppercase tracking-widest">Market Mood:</span>
                <span id="market-mood"
                    class="text-[8px] font-black text-green-400 uppercase tracking-widest">CALCULATING...</span>
            </div>
            <div class="flex space-x-12 animate-marquee whitespace-nowrap px-4 text-[10px] font-bold uppercase tracking-[0.2em] text-primary/80"
                id="news-ticker">
                <span>â—ˆ INITIALIZING NEWS FEED...</span>
                <span>â—ˆ SCANNING GLOBAL MARKETS...</span>
                <span>â—ˆ AI CORE ONLINE...</span>
            </div>
        </div>
        <!-- Market Ticker -->
        <div class="text-white/70 py-2 overflow-hidden bg-white/5">
            <div class="flex space-x-12 animate-marquee whitespace-nowrap px-4 text-xs font-medium uppercase tracking-wider"
                id="ticker-tape">
                <span class="flex items-center hover:text-white transition cursor-pointer"
                    onclick="loadChart('NSE:NIFTY', 'NSE')">NIFTY 50 <span class="ml-2 text-green-400 font-bold"
                        id="nifty-price">24,950.00</span></span>
                <span class="flex items-center hover:text-white transition cursor-pointer"
                    onclick="loadChart('BSE:SENSEX', 'BSE')">SENSEX <span class="ml-2 text-green-400 font-bold"
                        id="sensex-price">82,300.20</span></span>
                <span class="flex items-center hover:text-white transition cursor-pointer"
                    onclick="openPredictionModal('RELIANCE')">RELIANCE <span class="ml-2 text-red-400 font-bold"
                        id="reliance-price">2,980.50</span></span>
                <span class="flex items-center hover:text-white transition cursor-pointer"
                    onclick="openPredictionModal('TCS')">TCS <span class="ml-2 text-green-400 font-bold"
                        id="tcs-price">3,850.25</span></span>
                <span class="flex items-center hover:text-white transition cursor-pointer"
                    onclick="openPredictionModal('HDFCBANK')">HDFC BANK <span class="ml-2 text-primary font-bold"
                        id="hdfcbank-price">1,650.00</span></span>
                <span class="flex items-center hover:text-white transition cursor-pointer"
                    onclick="openPredictionModal('INFY')">INFY <span class="ml-2 text-green-400 font-bold"
                        id="infy-price">1,520.00</span></span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-fade-in">

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <!-- Left Column: Chart & Market Data -->
            <div class="lg:col-span-2 space-y-8">
                <!-- TradingView Chart -->
                <div
                    class="glass p-6 rounded-2xl shadow-2xl border border-white/10 h-[580px] group transition-all duration-500 hover:border-primary/30">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold flex items-center text-white">
                            <span class="mr-3 p-1.5 bg-primary/10 rounded-lg text-primary">ðŸ“Š</span> Market Topology
                            <span class="ml-3 text-xs font-normal text-gray-500 border-l border-white/10 pl-3">REAL-TIME
                                DATASTREAM</span>
                        </h2>
                        <div class="flex bg-white/5 p-1 rounded-lg border border-white/5">
                            <button id="chart-status-badge"
                                class="px-3 py-1 text-xs bg-primary rounded-md font-extrabold text-white">LIVE</button>
                            <div
                                class="px-3 py-1 text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center">
                                <span class="w-1.5 h-1.5 bg-primary rounded-full mr-2 animate-ping"></span> Sync Ready
                            </div>
                        </div>
                    </div>
                    <!-- TradingView Widget -->
                    <div id="tv-container"
                        class="h-[440px] rounded-xl overflow-hidden border border-white/5 bg-black/20 transition-all duration-700">
                        <div id="tradingview_b2474" style="height:100%;width:100%"></div>
                    </div>
                </div>

                <!-- Quantum Ledger -->
                <div class="glass p-6 rounded-2xl border border-white/10">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-lg font-bold text-white">Post-Quantum Blockchain Ledger</h3>
                            <p class="text-xs text-gray-500 mt-1 uppercase tracking-tighter">TAMPER-PROOF RECORD OF ALL
                                AI REBALANCING EVENTS</p>
                        </div>
                        <span
                            class="text-[10px] font-black tracking-widest bg-purple-500/20 text-purple-400 px-3 py-1.5 rounded-full border border-purple-500/30 uppercase">
                            Kyber-1024 Secure
                        </span>
                    </div>
                    <div class="overflow-x-auto no-scrollbar">
                        <table class="min-w-full text-sm text-left">
                            <thead class="text-gray-500 border-b border-white/5">
                                <tr>
                                    <th class="px-4 py-3 font-medium">Quantum Signature Hash</th>
                                    <th class="px-4 py-3 font-medium">Operation</th>
                                    <th class="px-4 py-3 font-medium">Timestamp</th>
                                    <th class="px-4 py-3 font-medium">Status</th>
                                </tr>
                            </thead>
                            <tbody id="ledger-body" class="text-gray-300">
                                <tr class="border-b border-white/5 hover:bg-white/5 transition">
                                    <td class="px-4 py-4 font-mono text-xs text-primary/80">0x7f...3a2b8e9c1d...</td>
                                    <td class="px-4 py-4 flex items-center">
                                        <span class="w-2 h-2 bg-blue-500 rounded-full mr-3"></span>
                                        AI Optimization
                                    </td>
                                    <td class="px-4 py-4 text-xs font-mono">13:42:05.902</td>
                                    <td class="px-4 py-4">
                                        <span
                                            class="bg-green-500/10 text-green-400 px-2 py-1 rounded-md text-[10px] font-bold border border-green-500/20 uppercase tracking-tighter">Verified</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Right Column: AI Optimizer -->
            <div class="space-y-8">
                <!-- Portfolio Composition -->
                <div class="glass p-6 rounded-2xl border border-white/10">
                    <div class="flex justify-between items-start mb-6">
                        <h3 class="text-lg font-bold text-white uppercase tracking-tight">Portfolio Node</h3>
                        <div class="text-right">
                            <p class="text-xs text-gray-500 uppercase tracking-widest">Growth</p>
                            <p class="text-sm text-green-400 font-black">+12.4%</p>
                        </div>
                    </div>
                    <div class="relative h-60 mb-6 flex items-center justify-center">
                        <canvas id="portfolioChart"></canvas>
                        <div class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
                            <span class="text-[10px] text-gray-500 uppercase font-black">Alpha</span>
                            <span class="text-xl font-black text-white">4.2</span>
                        </div>
                    </div>
                    <div class="p-4 bg-white/5 rounded-xl border border-white/10 flex justify-between items-center">
                        <div>
                            <p class="text-[10px] text-gray-500 uppercase tracking-widest leading-none mb-1">Total
                                Valuation</p>
                            <p id="total-valuation" class="text-2xl font-black text-white">â‚¹ 1,24,500</p>
                        </div>
                        <div class="p-2 bg-primary/10 rounded-lg">
                            <span class="text-xl font-bold text-primary">â‚¹</span>
                        </div>
                    </div>
                </div>

                <!-- AI Sentinel -->
                <div
                    class="bg-gradient-to-br from-primary/80 to-blue-700/80 p-6 rounded-2xl shadow-2xl relative overflow-hidden group">
                    <div
                        class="absolute -right-8 -top-8 w-32 h-32 bg-white/10 rounded-full blur-3xl group-hover:bg-white/20 transition-all duration-500">
                    </div>

                    <div class="relative">
                        <div class="flex items-center mb-4">
                            <div class="p-2 bg-white/20 rounded-lg mr-3">
                                <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M13 10V3L4 14h7v7l9-11h-7z" />
                                </svg>
                            </div>
                            <h3 class="text-lg font-black text-white uppercase tracking-tight">AI Sentinel Engine</h3>
                        </div>

                        <p class="text-blue-50 text-xs mb-6 leading-relaxed opacity-90 italic text-center min-h-[40px]"
                            id="ai-reasoning">
                            "Standing by for quantum-optimized directive..."
                        </p>

                        <button onclick="optimizePortfolio()" id="optimize-btn"
                            class="w-full bg-white text-primary hover:bg-blue-50 py-4 rounded-xl font-black uppercase text-xs tracking-widest shadow-xl transition-all active:scale-95 flex items-center justify-center">
                            <span>Execute Quantum Scan</span>
                        </button>

                        <div id="optimization-results"
                            class="hidden mt-6 pt-6 border-t border-white/20 animate-fade-in text-center">
                            <div class="text-[9px] font-black text-white/50 mb-3 tracking-[0.3em] uppercase">
                                Post-Quantum Optimization Log</div>
                            <ul class="text-sm space-y-3" id="strategy-list">
                                <!-- Items inserted via JS -->
                            </ul>
                            <div class="mt-4 pt-4 border-t border-white/10 text-left">
                                <p class="text-[9px] font-black text-white/50 mb-3 tracking-[0.2em] uppercase">AI
                                    Suggestions</p>
                                <ul id="ai-suggestions" class="space-y-2">
                                    <li class="flex items-center text-xs text-white/60"><span
                                            class="w-1 h-1 bg-primary rounded-full mr-2"></span> Waiting for scan...
                                    </li>
                                </ul>
                            </div>
                            <!-- Detailed Review -->
                            <div class="mt-4 pt-4 border-t border-white/10 text-left">
                                <p class="text-[9px] font-black text-white/50 mb-3 tracking-[0.2em] uppercase">Deep Node
                                    Analysis (Why these stocks?)</p>
                                <div id="ai-detailed-review" class="space-y-4">
                                    <p class="text-[10px] text-white/30 italic text-center">AI detailed reviews will
                                        appear here after optimization.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Versus Analysis (RAG Engine) -->
            <div class="glass p-6 rounded-2xl border border-white/10 space-y-6">
                <div class="flex items-center space-x-3">
                    <div class="p-2 bg-purple-500/10 rounded-lg">
                        <svg class="w-5 h-5 text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
                        </svg>
                    </div>
                    <h3 class="text-lg font-black text-white uppercase tracking-tight">AI Versus Engine</h3>
                </div>
                <p class="text-[9px] text-gray-500 font-bold uppercase tracking-widest leading-relaxed">Challenge the AI
                    with a pair comparison context. (RAG VECTOR Analysis)</p>
                <div class="flex space-x-2">
                    <input id="vs-input-a" type="text" placeholder="RELIANCE"
                        class="bg-white/5 border border-white/10 px-3 py-2 rounded-lg text-xs text-white placeholder-gray-600 w-1/2 focus:outline-none focus:border-purple-500/50">
                    <input id="vs-input-b" type="text" placeholder="ADANI"
                        class="bg-white/5 border border-white/10 px-3 py-2 rounded-lg text-xs text-white placeholder-gray-600 w-1/2 focus:outline-none focus:border-purple-500/50">
                </div>
                <button onclick="runComparison()"
                    class="w-full bg-purple-600 hover:bg-purple-500 py-3 rounded-xl font-black text-[10px] text-white uppercase tracking-widest transition shadow-lg shadow-purple-600/20 active:scale-95">Execute
                    Proof Analysis</button>

                <div id="vs-loading" class="hidden text-center py-4 bg-white/5 rounded-2xl animate-pulse">
                    <p class="text-[9px] text-purple-400 font-black uppercase tracking-widest">Scanning 10-K Filings &
                        Vectorizing News...</p>
                </div>

                <div id="vs-result" class="hidden space-y-4">
                    <div class="p-4 bg-purple-500/10 border border-purple-500/20 rounded-2xl">
                        <div class="flex justify-between items-center mb-2">
                            <span id="vs-winner-label"
                                class="text-xs font-black text-white uppercase tracking-tight">WINNER: RELIANCE</span>
                            <span id="vs-confidence" class="text-[8px] font-bold text-purple-400 uppercase">92%
                                CONFIDENCE</span>
                        </div>
                        <p id="vs-reasoning" class="text-[10px] text-gray-400 leading-relaxed"></p>
                    </div>
                    <div>
                        <p class="text-[9px] font-black text-gray-500 uppercase tracking-widest mb-2">Evidence Log (RAG
                            Proof)</p>
                        <div id="vs-proof-list" class="space-y-2">
                            <!-- Proof links here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- NEW: AI Integrity Audit -->
            <div class="glass p-6 rounded-2xl border border-white/10 space-y-6">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg font-bold text-white uppercase tracking-tight">AI Integrity Audit</h3>
                    <div id="confidence-indicator"
                        class="px-2 py-0.5 rounded bg-blue-500/10 text-blue-400 text-[10px] font-black border border-blue-500/20">
                        CONFIDENCE: 92%</div>
                </div>

                <div>
                    <p class="text-[9px] font-black text-gray-500 uppercase tracking-widest mb-3">Explainability
                        (XAI)</p>
                    <div class="space-y-3" id="xai-factors">
                        <div class="text-[10px] text-gray-400">Technical Trends <span
                                class="float-right text-primary">40%</span></div>
                        <div class="w-full bg-white/5 h-1.5 rounded-full overflow-hidden">
                            <div class="bg-primary h-full" style="width: 40%"></div>
                        </div>
                        <div class="text-[10px] text-gray-400">Sentiment <span
                                class="float-right text-primary">35%</span></div>
                        <div class="w-full bg-white/5 h-1.5 rounded-full overflow-hidden">
                            <div class="bg-primary h-full" style="width: 35%"></div>
                        </div>
                    </div>
                </div>

                <div class="pt-4 border-t border-white/5">
                    <p class="text-[9px] font-black text-gray-500 uppercase tracking-widest mb-3">Black Swan Stress
                        Test</p>
                    <div class="flex items-center justify-between p-2 bg-red-500/5 rounded border border-red-500/10">
                        <span class="text-[10px] font-bold text-red-400">MARKET CRASH (-20%)</span>
                        <span class="text-[10px] font-black text-red-400" id="stress-impact">-18.4% IMPACT</span>
                    </div>
                    <p class="text-[10px] text-gray-500 mt-2 italic">*AI monitored for drift. Re-training cycle:
                        48h.</p>
                </div>
            </div>

            <!-- NEW: Quantum Shield Toggle -->
            <div
                class="glass p-5 rounded-2xl border border-white/10 flex items-center justify-between group transition-all duration-300 hover:bg-white/5">
                <div class="flex items-center">
                    <div class="p-2 bg-purple-500/10 rounded-lg mr-3">
                        <svg class="w-5 h-5 text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                        </svg>
                    </div>
                    <div>
                        <p class="text-xs font-bold text-white">Quantum Shield</p>
                        <p class="text-[10px] text-gray-500">NIST PQC Standards</p>
                    </div>
                </div>
                <button onclick="activateQuantumShield()" id="shield-btn"
                    class="px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg text-xs font-black shadow-lg shadow-purple-500/30 transition uppercase">Activate</button>
            </div>

            <!-- Live Sentiment News -->
            <div class="glass p-6 rounded-2xl border border-white/10">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-lg font-bold text-white uppercase tracking-tight">Live Sentiment News</h3>
                    <span
                        class="text-[10px] font-bold text-primary animate-pulse uppercase tracking-widest">REAL-TIME</span>
                </div>
                <div id="news-feed" class="space-y-4 max-h-[300px] overflow-y-auto no-scrollbar">
                    <!-- News items via JS -->
                    <div class="animate-pulse flex items-center space-x-4">
                        <div class="h-2 w-full bg-white/5 rounded"></div>
                    </div>
                </div>
            </div>
        </div>

        </div>

    </main>

    <!-- TradingView Script -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script type="text/javascript">
        let tvWidget;
        function loadChart(symbol = "NSE:NIFTY", exchange = "NSE") {
            const containerId = "tradingview_b2474";
            const container = document.getElementById(containerId);
            if (!container) return;

            document.getElementById('tv-container').classList.add('opacity-0', 'scale-95');

            setTimeout(() => {
                container.innerHTML = '';

                new TradingView.widget({
                    "autosize": true,
                    "symbol": symbol,
                    "interval": "D",
                    "timezone": "Asia/Kolkata",
                    "theme": "dark",
                    "style": "1",
                    "locale": "in",
                    "toolbar_bg": "#f1f3f6",
                    "enable_publishing": false,
                    "allow_symbol_change": true,
                    "container_id": containerId,
                    "studies": [
                        "RSI@tv-basicstudies",
                        "MASimple@tv-basicstudies"
                    ]
                });

                setTimeout(() => {
                    document.getElementById('tv-container').classList.remove('opacity-0', 'scale-95');
                }, 500);
            }, 300);
        }

        // Initial Load with SENSEX
        loadChart("BSE:SENSEX", "BSE");
    </script>
    <!-- JS Logic -->
    <script src="/static/js/dashboard.js"></script>
</body>

</html>